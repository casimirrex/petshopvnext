version: "3.7"

services:
  petshop-db:
    image: sixeyed/petshop-db:1809
    environment: 
     - sa_password=p33tsh**p
    ports:
      - 1434:1433

  petshop-products-service:
    image: sixeyed/petshop-products-service:2007-nanoserver-1809
    environment: 
      - ConnectionStrings:MSPetShop4=Server=petshop-db;Database=MSPetShop4;User Id=sa;Password=p33tsh**p;
    ports:
      - 8080:80
    depends_on:
      - petshop-db
    build:
      context: ..
      dockerfile: docker/products-service/Dockerfile
      args: 
        SDK_TAG: 5.0.100-preview.7-nanoserver-1809
        ASPNET_TAG: 5.0.0-preview.7-nanoserver-1809
      target: common